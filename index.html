<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>地図投影法可視化 - Map Projection Visualization</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v4.min.js"></script>
</head>
<body>
    <header class="header">
        <h1>地図投影法可視化</h1>
        <div class="projection-selector">
            <label for="projection-select">投影法:</label>
            <select id="projection-select">
                <option value="mercator">メルカトル図法</option>
                <option value="stereographic">ステレオ図法</option>
                <option value="equalEarth">イコールアース図法</option>
                <option value="mollweide">モルワイデ図法</option>
                <option value="azimuthalEquidistant">正距方位図法</option>
                <option value="orthographic">正射図法</option>
                <option value="gnomonic">心射図法</option>
                <option value="naturalEarth1">ナチュラルアース図法</option>
            </select>
        </div>
    </header>

    <main class="main-container">
        <aside class="sidebar">
            <section class="input-section">
                <h2>顔の画像データ入力</h2>
                
                <div class="input-type-selector">
                    <label>
                        <input type="radio" name="input-type" value="geojson" checked>
                        GeoJSON
                    </label>
                    <label>
                        <input type="radio" name="input-type" value="image">
                        PNG, JPEG
                    </label>
                </div>

                <div class="file-input-area" id="file-input-area">
                    <div class="drop-zone" id="drop-zone">
                        <p>ファイルをドラッグ&ドロップ</p>
                        <p>または</p>
                        <input type="file" id="file-input" accept=".geojson,.json,.png,.jpg,.jpeg">
                        <label for="file-input" class="file-input-button">ファイルを選択</label>
                    </div>
                </div>

                <div class="file-info" id="file-info" style="display: none;">
                    <p id="file-name"></p>
                    <p id="file-type"></p>
                </div>

                <div class="sample-section">
                    <h3>サンプルデータ</h3>

                    <div class="sample-list" id="sample-geojson-list" style="display: none;">
                        <h4>GeoJSONサンプル</h4>
                        <div id="geojson-samples"></div>
                    </div>
                    
                    <div class="sample-list" id="sample-image-list" style="display: none;">
                        <h4>画像サンプル</h4>
                        <div id="image-samples"></div>
                    </div>
                </div>
            </section>

            <section class="control-section">
                <h2>表示設定</h2>
                
                <div class="control-group">
                    <label>
                        <input type="checkbox" id="show-graticule" checked>
                        緯度経度線を表示
                    </label>
                </div>

                <div class="control-group">
                    <label for="scale-slider">スケール:</label>
                    <input type="range" id="scale-slider" min="50" max="500" value="150">
                    <span id="scale-value">150</span>
                </div>

                <div class="control-group">
                    <label for="rotation-x">回転 (経度):</label>
                    <input type="range" id="rotation-x" min="-180" max="180" value="0">
                    <span id="rotation-x-value">0°</span>
                </div>

                <div class="control-group">
                    <label for="rotation-y">回転 (緯度):</label>
                    <input type="range" id="rotation-y" min="-90" max="90" value="0">
                    <span id="rotation-y-value">0°</span>
                </div>
            </section>

            <section class="info-section">
                <h2>投影法情報</h2>
                <div id="projection-info">
                    <p>投影法を選択してください</p>
                </div>
            </section>
        </aside>

        <section class="canvas-container">
            <div class="canvas-wrapper">
                <svg id="map-svg" width="800" height="600"></svg>
                <canvas id="image-canvas" width="800" height="600" style="display: none;"></canvas>
            </div>
            
            <div class="loading" id="loading" style="display: none;">
                <p>変換中...</p>
                <div class="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>地図投影法の歪みを可視化 - 顔写真やGeoJSONデータで投影法の特性を理解</p>
    </footer>

    <script src="js/projections.js"></script>
    <script src="js/input-handler.js"></script>
    <script src="js/renderer.js"></script>
    <script src="js/ui-controls.js"></script>
    <script src="js/sample-manager.js"></script>
    <script src="js/main.js"></script>
</body>
</html>